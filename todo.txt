1. статья на хабре.

stm version
1. провести эксперементы с часами на stm32l(high-density/medium-density)/f
2. переделать на stm32l1 для улучшения контроля за питанием, уменьшения количества компонентов и для более простой синхронизации времени 
по эталонному сигналу в stm32 уже встроены часы с подстройкой хода.
3. отключать питание gps модуля с помощью мосфета
4. включать и выключать gps используя полевой транзистор
5. использовать сборки с ключами вместо полевиков.
6. добавить ferrite beard для gps
7. защитить от заряда через программатор, чтобы избежать перезаряда.
8. отдельный конденсатор для avcc + R = 100
9. катушка /ferrite beard?/ для входного питания. фильтр 1 uF tantal + 0.1 uF ceramic
10. рассмотреть переход на 10 uF фильтрующие конденсаторы перед антеной.
11. переделать все software на stm32l/f
12. управление зарядкой
13. запитывать от usb в обход батареи при подключении такого питания
14. токоограничивающий резитор на дисплей
15. контроль за солнечной батареей
16. рассмотреть использование 200k резисторов там где нужно открывать транзиторы pnp
17. refactor code. dcf77 class. gui class? scheduler class. device class.
18. синхронизировать секунды часов и передатчика. сейчас они иногда не совпадают.


history 
pcb v 2.1 software 1.5 31 juli 2016
1. reduce progmem usage. уменьшить количество фонтов.
2. current history
3. уменьшить потребление энергии. отправлять в сон атмегу. отключать все? будить по часам, чтобы не работал gps модуль?
подтягивающие резисторы отключить. отключить лишнее adc. отключать adc. 

pcb v 2.1 software 1.4 17 july 2016 
1. переделать токоизмерительный шунт на 0.1 ом, и измерительный резистор взять 100k
2. исправить сброс при подключении радио на 3.2в
3. радио вклюается на второй щелчок. должно на первый.
4. иконки для спутника радио и внешнего питания
5. сохранять информацию о яркости
6. уровень яркости дисплея.
7. более опрятный вид на экране. новые шрифты.
8. реализована система управления.
9. иконки
10. автоматически синхронизировать время ночью
11. автоматически синхронизировать время ночью. check.
12. reduce ram usage
13. проверка на неинициализированную флешпамять

pcb v 2.1 software 1.3 25 june 2016
1. исправить ошибки pcb и схемы. см. errors.pcb

pcb v 2.0 software 1.3 18 june 2016
1. rotary encoder added interrupt based
2. собрать в корпусе.
3. уменьшить размер фонтов? пока места хватает.

pcb v 2.0 software 1.2 14 june 2016
1. разобраться с проблемами экрана и его смещением. похоже что это не ssd1306 а sh1106!!!
2. иногда неправильно синхронизируется дата с gps
                                                               
pcb v 2.0 software 1.1 10 june 2016
25. собрать в корпусе. частично есть.
26. собрать все даташиты используемых компонентов в одном месте.
27. собрана плата на макетной плате под пайку
28. плата перепроектирована под смд компоненты
29. переделана система генерации сигнала. убран степ ап. добавлен дифф усилитель. передатчик работает через катушку связи теперь. 
мощность увеличена в сотни раз.
30. заказана плата в резоните. собрана пробная версия для корпуса.
31. включение нажатием кнопки без фиксации. автовыключение. 
32. питание радио управляется полевым транзистором с низким сопротивлением
33. добавлена возможность измерения тока.
34. вновь вернулись к магнитной антене.
35. модель переведена на kiCad+topoR. fritzing слишком глючный.
36. установлен енкодер.

ver 1.0 2015:
1. получение времени по gps
2. хранение времени в rtc.
3. передача сигнала. 
4. протокол передачи. 
5. правильное время в utc.
6. сделано на основе atmega.
7. все детали заказаны.
8. Нарисовать схему. и pdf. 
9. С Антеной вопрос решен. нельзя использовать магнитную антену. нужно использовать антену большого диаметра. например 70мм*350 витков -- ок.
лучше будет антена 100-140мм диаметр 150-200 витков. на самом деле не так. тип антены не так влияет но не так сильно. очень сильно влияет ее положение.
ось антены должна быть направленна на приемник. влияет напряжение на передатчике. 8 вольт -- даёт вполне комфортный диапазон передачи.
10. разобраться с усилителями и резонаторами. усилители почти ничего не дали. антена эффективнее.
11. потребление:
gps 80mA
oled 20mA
transiver 5mA(50ma с повышающим до 8 вольт преобразователем)
atmega 20mA
светодиоды просаживают питание. похоже их лучше не использовать масштабно.
почему экраном не ограничиться?
12. мориторить напряжение зарядки.
13. питание.
13.1. как разводить питание.
   решено питание вместе с схемой передатчика развести на отдельной плате. из 2-х плат: логики и питания с передатчиком сделать "бутерброд".
 13.3. делать ли 2 раздельных питания на 3.3в и на 5.5 (12)(adj, управляемо)в. (atmega пашет от 3.3в, gps модуль имеет родное питание 3.3в экран имеет родное питание 3.3в)
   питаемся от батареи или от преобразователя-зарядки. делаем повышайку только на передатчик. 
   повышайка регулируется переменным резистором. напряжение питания передатчика контроллируеися.
   повышайка сделана на lt1302 со слегка модифицированной обвязкой. из преимуществ: имеет выход shuidown. 
   в случае shutdown напряжение на его выходе =Vin-0.5в
   повышайка можетотключаться.
 13.4. батарея проверяется через аралоговый вход. испльзуется делитель и внутреннее опорное питание (1.1 в) atmega для точки отчета.
 13.5. управление напряжением на передатчике.
 13.6. использовать аккумулятор для питания 3.7v 10000mA. таких нет. есть только на 6000 и то не факт что это реальные 6000.
 13.7. сделать зарядку 
14. как разводить таймер. таймер ds3132 распаиваем на переходике.
15. добавить состояние батареи. сейчас выдается напряжение выхода батареи. пока думаю хватит.
16.1. использовать ли adafruit gps ultimate или сделать самопальный модуль. во втором случае нужно еще сделать выключение gps модуля.
  16.1.1. как выключать adafruit? использовать стягивающий резистор на землю?
  Использовать Adafrit проще всего. enable pin на нем не работает зато он великолепно отправляется в сон командой "$PMTK161,0*28\r\n" 
  (разбудить любым сивволом)
  16.1.2. для управления нужен p-channel мосфет если использум не adafruit gps.
  не получилось ничего сделать с p-channel мосфет. возможно не те мосфеты выбираю, но даже в судя по спецификации таких мосфетов которые могут подойти 
  раз два и обчёлся.
17. Добавить выключатель на передатчик и на gps. готово.
18. получиться ли достать модуль с 4 инверторами и одним и-не. тогда можно выключать передатчик. или использовать раздельное выключаемое питание.
  при использовании lt1302 для усиления и adafruit gps не нужно. 
19. дорисовать и разобраться с уилителем на диоде. так ли он нужен. не нужен. диод был установлен скорее по ошибке. тут важнее сопротивление.
  транзистор был всегда приоткрыт. резистор на 100к все исправил.
20. нарисовать кастомные компоненты для fritzing. используем штатные. таймер и контроллер заряда представляем просто в виде широкого ic.
21. нарисовать плату.
22. спаять плату с smd часами. для макетки спаяно. нужно еще допаять для финальной версии.
23. напряжение передатчика.
24. привести схему в соответсвие с последним макетом.
